<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="${item.name} + ' - Big5 Shop'">Product Page</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    <style>
        body { overflow-x: hidden; }
        .low-low { font-size: 1.51rem; line-height: 1; }
    </style>
</head>
<body>
<nav class="navbar" style="background-color: #0060FF;">
    <div class="container-fluid align-items-center">
        <!-- Link to static home page (no controller needed yet) -->
        <a th:href="@{/}" class="navbar-brand text-white fs-1 me-4 fw-bold">Big5</a>
        <a th:href="@{/items}" class="btn btn-light rounded-pill px-4 me-2 fw-bold">All Items</a>
        <a th:href="@{/categories}" class="btn btn-light rounded-pill px-4 me-2 fw-bold">Categories</a>
        <form class="d-flex flex-grow-1 mx-3" role="search">
            <input type="text" class="form-control rounded-pill" placeholder="Search for items">
        </form>
        <button class="btn btn-light rounded-pill me-2">
            <i class="bi bi-cart fs-4 px-2"></i>
        </button>
        <button class="btn btn-light rounded-pill">
            <i class="bi bi-person fs-4 px-2"></i>
        </button>
    </div>
</nav>

<div class="container py-5">
    <div class="row align-items-center justify-content-center rounded bg-light shadow-sm p-5">
        <div class="col-md-4 text-center" style="margin-right: 55px;">
            <div class="rounded bg-white align-items-center justify-content-center py-3" style="height: 350px;">
                <!-- Dynamic Image: assumes 'item.image' contains 'charmander.png' -->
                <img th:src="@{'/pictures/' + ${item.image}}" style="height:100%" alt="Product Image">
            </div>
        </div>
        <div class="col-md-7">
            <!-- Dynamic Name -->
            <h1 class="fw-bold" style="color: #8190A5;" th:text="${item.name}">Product Name</h1>

            <!-- Dynamic Category -->
            <p class="text-secondary mb-3" style="font-size: 1.45rem;" th:text="${item.category}">Category</p>

            <!-- Dynamic Price -->
            <h2 class="fw-bold mb-3" style="color: #8190A5;" th:text="'$' + ${item.price}">$0.00</h2>

            <!-- Add to Cart Logic (Optional: Form to submit ID) -->
            <form th:action="@{/cart/add}" method="post">
                <input type="hidden" name="itemId" th:value="${item.id}" />
                <button type="submit" class="btn text-white fw-bold rounded-pill mb-4" style="background-color: #0060FF; font-size: 25px;">
                    + Add to Cart
                </button>
            </form>

            <!-- Dynamic Description -->
            <p class="text-secondary mb-3" style="font-size: 1.45rem;" th:text="${item.description}">
                Description...
            </p>
        </div>
    </div>
</div>

<div class="container" style="padding-top: 60px">
    <div class="row align-items-center justify-content-center">
        <h2 class="fw-bold" style="color: #8190A5;">You Might Also Like...</h2>
    </div>
</div>

<div class="container-fluid py-5">
    <div class="row justify-content-center" style="column-gap: 40px">

        <!-- LOOP START: This generates a card for every item in the 'suggestions' list -->
        <div class="col-md-3" th:each="suggestedItem : ${suggestions}">
            <div class="p-1 rounded bg-light shadow-sm" style="height: 150px; position: relative;">

                <!-- Link to the suggested item's page using its ID -->
                <a th:href="@{'/product/' + ${suggestedItem.id}}" class="text-decoration-none">
                    <div class="row">
                        <div class="col-md-5 text-end">
                            <img th:src="@{'/pictures/' + ${suggestedItem.image}}" class="img-fluid" style="max-width: 120px;">
                        </div>
                        <div class="col-md-7">
                            <!-- Mixed text using concatenation or spans -->
                            <h4 class="fw-bold" style="color: #8190A5;">
                                <span th:text="${suggestedItem.name}">NAME</span><br>
                                <span th:text="'$' + ${suggestedItem.price}">$0</span>
                            </h4>
                        </div>
                    </div>
                </a>

                <!-- Quick Add Button -->
                <form th:action="@{/cart/add}" method="post">
                    <input type="hidden" name="itemId" th:value="${suggestedItem.id}" />
                    <button class="btn fw-bold text-white rounded-circle fs-5" style="background-color: #0060FF; position: absolute; bottom: 10px; right: 10px; width: 44px; height: 44px; line-height: 1;">+</button>
                </form>
            </div>
        </div>
        <!-- LOOP END -->

    </div>
</div>
</body>
</html>